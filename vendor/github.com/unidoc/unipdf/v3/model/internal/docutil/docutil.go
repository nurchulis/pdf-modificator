//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_d "errors";_f "fmt";_fa "github.com/unidoc/unipdf/v3/common";_g "github.com/unidoc/unipdf/v3/core";);func (_ab *Catalog )GetMetadata ()(*_g .PdfObjectStream ,bool ){_cf ,_ddf :=_g .GetStream (_ab .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
return _cf ,_ddf ;};func (_bg *OutputIntents )Add (oi _g .PdfObject )error {_bad ,_eee :=oi .(*_g .PdfObjectDictionary );if !_eee {return _d .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _cd ,_cab :=_g .GetStream (_bad .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_cab {_bg ._ddfc .Objects =append (_bg ._ddfc .Objects ,_cd );};_eeea ,_ea :=oi .(*_g .PdfIndirectObject );
if !_ea {_eeea =_g .MakeIndirectObject (oi );};if _bg ._cfa ==nil {_bg ._cfa =_g .MakeArray (_eeea );}else {_bg ._cfa .Append (_eeea );};_bg ._ddfc .Objects =append (_bg ._ddfc .Objects ,_eeea );return nil ;};func (_def *Document )FindCatalog ()(*Catalog ,bool ){var _ac *_g .PdfObjectDictionary ;
for _ ,_caf :=range _def .Objects {_af ,_ebc :=_g .GetDict (_caf );if !_ebc {continue ;};if _abf ,_dbe :=_g .GetName (_af .Get ("\u0054\u0079\u0070\u0065"));_dbe &&*_abf =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_ac =_af ;break ;};};if _ac ==nil {return nil ,false ;
};return &Catalog {Object :_ac ,_c :_def },true ;};func (_gfa *OutputIntents )Len ()int {return _gfa ._cfa .Len ()};func (_bff *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_bcd :=_bff .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
if _bcd ==nil {return nil ,false ;};_de ,_be :=_g .GetIndirect (_bcd );if !_be {return nil ,false ;};_ed ,_db :=_g .GetArray (_de .PdfObject );if !_db {return nil ,false ;};return &OutputIntents {_ef :_de ,_cfa :_ed ,_ddfc :_bff ._c },true ;};func (_gcg Page )GetResources ()(*_g .PdfObjectDictionary ,bool ){return _g .GetDict (_gcg .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};type Image struct{Name string ;Width int ;Height int ;Colorspace _g .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_g .PdfObjectStream ;};func (_aa *Document )GetPages ()([]Page ,bool ){_eda ,_eg :=_aa .FindCatalog ();
if !_eg {return nil ,false ;};return _eda .GetPages ();};type Content struct{Stream *_g .PdfObjectStream ;_aed int ;_bea Page ;};func (_fc *Catalog )GetPages ()([]Page ,bool ){_dc ,_gb :=_g .GetDict (_fc .Object .Get ("\u0050\u0061\u0067e\u0073"));if !_gb {return nil ,false ;
};_cg ,_cc :=_g .GetArray (_dc .Get ("\u004b\u0069\u0064\u0073"));if !_cc {return nil ,false ;};_bd :=make ([]Page ,_cg .Len ());for _a ,_gf :=range _cg .Elements (){_ba ,_e :=_g .GetDict (_gf );if !_e {continue ;};_bd [_a ]=Page {Object :_ba ,_gfae :_a +1,_adg :_fc ._c };
};return _bd ,true ;};func (_cfb *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _ff :=_cfb .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");_ff !=nil {for _bab ,_baa :=range _cfb ._c .Objects {if _baa ==_ff {if outputIntents ._ef ==_ff {return ;
};_cfb ._c .Objects =append (_cfb ._c .Objects [:_bab ],_cfb ._c .Objects [_bab +1:]...);break ;};};};_gc :=outputIntents ._ef ;if _gc ==nil {_gc =_g .MakeIndirectObject (outputIntents ._cfa );};_cfb .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_gc );
_cfb ._c .Objects =append (_cfb ._c .Objects ,_gc );};func (_cbf Page )FindXObjectImages ()([]*Image ,error ){_dgd ,_aaga :=_cbf .GetResourcesXObject ();if !_aaga {return nil ,nil ;};var _eec []*Image ;var _fcg error ;_aae :=map[*_g .PdfObjectStream ]int {};
_abc :=map[*_g .PdfObjectStream ]struct{}{};var _fg int ;for _ ,_eba :=range _dgd .Keys (){_bffd ,_cfd :=_g .GetStream (_dgd .Get (_eba ));if !_cfd {continue ;};if _ ,_aec :=_aae [_bffd ];_aec {continue ;};_cdb ,_dcd :=_g .GetName (_bffd .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));
if !_dcd ||_cdb .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_fae :=Image {BitsPerComponent :8,Stream :_bffd ,Name :string (_eba )};if _fae .Colorspace ,_fcg =_dbc (_bffd .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));
_fcg !=nil {_fa .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_fcg );continue ;};if _efe ,_dfb :=_g .GetIntVal (_bffd .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));
_dfb {_fae .BitsPerComponent =_efe ;};if _bdf ,_eaf :=_g .GetIntVal (_bffd .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));_eaf {_fae .Width =_bdf ;};if _cdbb ,_abca :=_g .GetIntVal (_bffd .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));
_abca {_fae .Height =_cdbb ;};if _cdc ,_efa :=_g .GetStream (_bffd .Get ("\u0053\u004d\u0061s\u006b"));_efa {_fae .SMask =&ImageSMask {Image :&_fae ,Stream :_cdc };_abc [_cdc ]=struct{}{};};switch _fae .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_fae .ColorComponents =3;
case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_fae .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_fae .ColorComponents =4;default:_fae .ColorComponents =-1;};_aae [_bffd ]=_fg ;_eec =append (_eec ,&_fae );
_fg ++;};var _fdg []int ;for _ ,_aea :=range _eec {if _aea .SMask !=nil {_bda ,_dfc :=_aae [_aea .SMask .Stream ];if _dfc {_fdg =append (_fdg ,_bda );};};};_ffd :=make ([]*Image ,len (_eec )-len (_fdg ));_fg =0;_dda :for _gd ,_ge :=range _eec {for _ ,_bca :=range _fdg {if _gd ==_bca {continue _dda ;
};};_ffd [_fg ]=_ge ;_fg ++;};return _eec ,nil ;};func (_ec *Document )AddStream (stream *_g .PdfObjectStream ){for _ ,_cccc :=range _ec .Objects {if _cccc ==stream {return ;};};_ec .Objects =append (_ec .Objects ,stream );};type Document struct{ID [2]string ;
Version _g .Version ;Objects []_g .PdfObject ;Info _g .PdfObject ;Crypt *_g .PdfCrypt ;UseHashBasedID bool ;};func (_dd *Catalog )HasMetadata ()bool {_ccc :=_dd .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");return _ccc !=nil ;};func (_badd *Content )SetData (data []byte )error {_efc ,_egd :=_g .MakeStream (data ,_g .NewFlateEncoder ());
if _egd !=nil {return _egd ;};_ebba ,_dcg :=_g .GetArray (_badd ._bea .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_dcg &&_badd ._aed ==0{_badd ._bea .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_efc );}else {if _egd =_ebba .Set (_badd ._aed ,_efc );
_egd !=nil {return _egd ;};};_badd ._bea ._adg .Objects =append (_badd ._bea ._adg .Objects ,_efc );return nil ;};type OutputIntent struct{Object *_g .PdfObjectDictionary ;};type OutputIntents struct{_cfa *_g .PdfObjectArray ;_ddfc *Document ;_ef *_g .PdfIndirectObject ;
};func (_eca Page )GetResourcesXObject ()(*_g .PdfObjectDictionary ,bool ){_bfd ,_gbg :=_eca .GetResources ();if !_gbg {return nil ,false ;};return _g .GetDict (_bfd .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};func (_fca *OutputIntents )Get (i int )(OutputIntent ,bool ){if _fca ._cfa ==nil {return OutputIntent {},false ;
};if i >=_fca ._cfa .Len (){return OutputIntent {},false ;};_bfa :=_fca ._cfa .Get (i );_ad ,_da :=_g .GetIndirect (_bfa );if !_da {_fcag ,_fcf :=_g .GetDict (_bfa );return OutputIntent {Object :_fcag },_fcf ;};_cdf ,_daf :=_g .GetDict (_ad .PdfObject );
return OutputIntent {Object :_cdf },_daf ;};func (_fb *Catalog )SetVersion (){_fb .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_g .MakeName (_f .Sprintf ("\u0025\u0064\u002e%\u0064",_fb ._c .Version .Major ,_fb ._c .Version .Minor )));};func (_df *Catalog )GetMarkInfo ()(*_g .PdfObjectDictionary ,bool ){_fcc ,_ca :=_g .GetDict (_df .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _fcc ,_ca ;};func (_fef Content )GetData ()([]byte ,error ){_bag ,_cbd :=_g .NewEncoderFromStream (_fef .Stream );if _cbd !=nil {return nil ,_cbd ;};_ebd ,_cbd :=_bag .DecodeStream (_fef .Stream );if _cbd !=nil {return nil ,_cbd ;};return _ebd ,nil ;
};type Catalog struct{Object *_g .PdfObjectDictionary ;_c *Document ;};func (_abd Page )GetContents ()([]Content ,bool ){_aaa ,_gcd :=_g .GetArray (_abd .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_gcd {_dg ,_ebcd :=_g .GetStream (_abd .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_ebcd {return nil ,false ;};return []Content {{Stream :_dg ,_bea :_abd ,_aed :0}},true ;};_edb :=make ([]Content ,_aaa .Len ());for _ecf ,_acc :=range _aaa .Elements (){_deg ,_gfaef :=_g .GetStream (_acc );if !_gfaef {continue ;};_edb [_ecf ]=Content {Stream :_deg ,_bea :_abd ,_aed :_ecf };
};return _edb ,true ;};func _dbc (_aag _g .PdfObject )(_g .PdfObjectName ,error ){var _edd *_g .PdfObjectName ;var _fd *_g .PdfObjectArray ;if _cce ,_gbf :=_aag .(*_g .PdfIndirectObject );_gbf {if _ae ,_ecd :=_cce .PdfObject .(*_g .PdfObjectArray );_ecd {_fd =_ae ;
}else if _gg ,_gga :=_cce .PdfObject .(*_g .PdfObjectName );_gga {_edd =_gg ;};}else if _deb ,_cde :=_aag .(*_g .PdfObjectArray );_cde {_fd =_deb ;}else if _ddc ,_ggc :=_aag .(*_g .PdfObjectName );_ggc {_edd =_ddc ;};if _edd !=nil {switch *_edd {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_edd ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_edd ,nil ;};};if _fd !=nil &&_fd .Len ()> 0{if _ffg ,_fda :=_fd .Get (0).(*_g .PdfObjectName );_fda {switch *_ffg {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _fd .Len ()==1{return *_ffg ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_ffg ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_ffg ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_ffg ,nil ;};};};return "",nil ;};type Page struct{_gfae int ;Object *_g .PdfObjectDictionary ;_adg *Document ;};func (_ee *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_ddfc :_ee ._c }};
type ImageSMask struct{Image *Image ;Stream *_g .PdfObjectStream ;};func (_gfd *Page )Number ()int {return _gfd ._gfae };func (_bf *Catalog )SetMetadata (data []byte )error {_eb ,_bc :=_g .MakeStream (data ,nil );if _bc !=nil {return _bc ;};_eb .Set ("\u0054\u0079\u0070\u0065",_g .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
_eb .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_g .MakeName ("\u0058\u004d\u004c"));_bf .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_eb );_bf ._c .Objects =append (_bf ._c .Objects ,_eb );return nil ;};func (_eae Page )FindXObjectForms ()[]*_g .PdfObjectStream {_gad ,_dab :=_eae .GetResourcesXObject ();
if !_dab {return nil ;};_adb :=map[*_g .PdfObjectStream ]struct{}{};var _badg func (_fac *_g .PdfObjectDictionary ,_dbee map[*_g .PdfObjectStream ]struct{});_badg =func (_dfg *_g .PdfObjectDictionary ,_gce map[*_g .PdfObjectStream ]struct{}){for _ ,_beb :=range _dfg .Keys (){_cgc ,_eddb :=_g .GetStream (_dfg .Get (_beb ));
if !_eddb {continue ;};if _ ,_fgf :=_gce [_cgc ];_fgf {continue ;};_eagf ,_fe :=_g .GetName (_cgc .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_fe ||_eagf .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_gce [_cgc ]=struct{}{};_ddg ,_fe :=_g .GetDict (_cgc .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_fe {continue ;};_fdc ,_egc :=_g .GetDict (_ddg .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _egc {_badg (_fdc ,_gce );};};};_badg (_gad ,_adb );var _ece []*_g .PdfObjectStream ;for _cgcg :=range _adb {_ece =append (_ece ,_cgcg );};return _ece ;
};func (_dee *Document )AddIndirectObject (indirect *_g .PdfIndirectObject ){for _ ,_bfg :=range _dee .Objects {if _bfg ==indirect {return ;};};_dee .Objects =append (_dee .Objects ,indirect );};func (_fbg *Catalog )SetMarkInfo (mi _g .PdfObject ){_ebb :=_g .MakeIndirectObject (mi );
_fbg .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_ebb );_fbg ._c .Objects =append (_fbg ._c .Objects ,_ebb );};